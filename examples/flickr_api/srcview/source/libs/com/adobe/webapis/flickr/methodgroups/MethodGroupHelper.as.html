<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>MethodGroupHelper.as</title>
<link rel="stylesheet" type="text/css" href="../../../../../../../SourceStyles.css"/>
</head>

<body><pre><span class="ActionScriptComment">/*
    Copyright (c) 2008, Adobe Systems Incorporated
    All rights reserved.

    Redistribution and use in source and binary forms, with or without 
    modification, are permitted provided that the following conditions are met:

    * Redistributions of source code must retain the above copyright notice, 
        this list of conditions and the following disclaimer.
    * Redistributions in binary form must reproduce the above copyright notice, 
        this list of conditions and the following disclaimer in the 
        documentation and/or other materials provided with the distribution.
    * Neither the name of Adobe Systems Incorporated nor the names of its 
        contributors may be used to endorse or promote products derived from 
        this software without specific prior written permission.

    THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; 
    AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE 
    IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE 
    ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE 
    LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR 
    CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF 
    SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS 
    INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN 
    CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) 
    ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE 
    POSSIBILITY OF SUCH DAMAGE.
*/</span>

<span class="ActionScriptpackage">package</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">adobe</span>.<span class="ActionScriptDefault_Text">webapis</span>.<span class="ActionScriptDefault_Text">flickr</span>.<span class="ActionScriptDefault_Text">methodgroups</span> <span class="ActionScriptBracket/Brace">{</span>
    
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">adobe</span>.<span class="ActionScriptDefault_Text">crypto</span>.<span class="ActionScriptDefault_Text">MD5</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">adobe</span>.<span class="ActionScriptDefault_Text">webapis</span>.<span class="ActionScriptDefault_Text">flickr</span>.<span class="ActionScriptOperator">*</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">adobe</span>.<span class="ActionScriptDefault_Text">webapis</span>.<span class="ActionScriptDefault_Text">flickr</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptOperator">*</span>;
    
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">geom</span>.<span class="ActionScriptDefault_Text">Rectangle</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">net</span>.<span class="ActionScriptDefault_Text">URLLoader</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">net</span>.<span class="ActionScriptDefault_Text">URLRequest</span>;
    <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">flash</span>.<span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptOperator">*</span>;
    
    <span class="ActionScriptASDoc">/**
     * Contains helper functions for the method group classes that are
     * reused throughout them.
     */</span>
    <span class="ActionScriptReserved">internal</span> <span class="ActionScriptclass">class</span> <span class="ActionScriptDefault_Text">MethodGroupHelper</span> <span class="ActionScriptBracket/Brace">{</span>
    
        <span class="ActionScriptASDoc">/**
         * Reusable method that the &quot;method group&quot; classes can call to invoke a
         * method on the API.
         *
         * @param callBack The function to be notified when the RPC is complete
         * @param method The name of the method to invoke ( like flickr.test.echo )
         * @param signed A boolean value indicating if the method call needs
         *            an api_sig attached to it
         * @param params An array of NameValuePair or primitive elements to pass
         *            as parameters to the remote method
         * @langversion ActionScript 3.0
         * @playerversion Flash 8.5
         * @tiptext
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">invokeMethod</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">service</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">FlickrService</span>, 
                                                <span class="ActionScriptDefault_Text">callBack</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Function</span>, <span class="ActionScriptDefault_Text">method</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>, 
                                                <span class="ActionScriptDefault_Text">signed</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span>, ... <span class="ActionScriptDefault_Text">params</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span>
        <span class="ActionScriptBracket/Brace">{</span>
            
            <span class="ActionScriptComment">// Create an array to store our name/value pairs
</span>            <span class="ActionScriptComment">// for the query because during signing we need to sort
</span>            <span class="ActionScriptComment">// these alphabetically
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">args</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">args</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NameValuePair</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;api_key&quot;</span>, <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">api_key</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">args</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NameValuePair</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;method&quot;</span>, <span class="ActionScriptDefault_Text">method</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            
            <span class="ActionScriptComment">// Loop over the params and add them as arguments
</span>            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">params</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">// Do we have an argument name, or do we create one
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">params</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptReserved">is</span> <span class="ActionScriptDefault_Text">NameValuePair</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">args</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">params</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptComment">// Create a unique argument name using our loop counter
</span>                    <span class="ActionScriptDefault_Text">args</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NameValuePair</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;param&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">i</span>, <span class="ActionScriptDefault_Text">params</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// If a user is authenticated, automatically add their token
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">permission</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">AuthPerm</span>.<span class="ActionScriptDefault_Text">NONE</span> <span class="ActionScriptOperator">&amp;&amp;</span> <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">token</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">args</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NameValuePair</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;auth_token&quot;</span>, <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">token</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptComment">// auto-sign the call because the user is authenticated
</span>                <span class="ActionScriptDefault_Text">signed</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// Sign the call if we have to, or if the user is logged in
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">signed</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                
                <span class="ActionScriptComment">// sign the call according to the documentation point #8
</span>                <span class="ActionScriptComment">// here: http://www.flickr.com/services/api/auth.spec.html
</span>                <span class="ActionScriptDefault_Text">args</span>.<span class="ActionScriptDefault_Text">sortOn</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;name&quot;</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">sig</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">secret</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">args</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">sig</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">args</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">name</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">args</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">value</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;    
                <span class="ActionScriptBracket/Brace">}</span>    
                <span class="ActionScriptDefault_Text">args</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">NameValuePair</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;api_sig&quot;</span>, <span class="ActionScriptDefault_Text">MD5</span>.<span class="ActionScriptDefault_Text">hash</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">sig</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// Construct the query string to send to the Flickr service
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">query</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;&quot;</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">k</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">k</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">args</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">k</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">// This puts 1 too many &quot;&amp;&quot; on the end, but that doesn&apos;t
</span>                <span class="ActionScriptComment">// affect the flickr call, so it doesn&apos;t matter
</span>                <span class="ActionScriptDefault_Text">query</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">args</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">k</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;=&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">args</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">k</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">value</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;&amp;&quot;</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// Use the &quot;internal&quot; flickrservice namespace to be able to
</span>            <span class="ActionScriptComment">// access the urlLoader so we can make the request.
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">loader</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">URLLoader</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">flickrservice_internal</span><span class="ActionScriptOperator">::</span><span class="ActionScriptDefault_Text">urlLoader</span>;
            
            <span class="ActionScriptComment">// Construct a url request with our query string and invoke
</span>            <span class="ActionScriptComment">// the Flickr method
</span>            <span class="ActionScriptDefault_Text">loader</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;complete&quot;</span>, <span class="ActionScriptDefault_Text">callBack</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">loader</span>.<span class="ActionScriptDefault_Text">load</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">URLRequest</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">FlickrService</span>.<span class="ActionScriptDefault_Text">END_POINT</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">query</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Handle processing the result of the API call.
         *
         * @param service The FlickrService associated with the method group
         * @param response The XML response we got from the loader call
         * @param result The event to fill in the details of and dispatch
         * @param propertyName The property in event.data that the results should be placed
         * @param parseFunction The function to parse the response XML with
         * @langversion ActionScript 3.0
         * @playerversion Flash 8.5
         * @tiptext
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">processAndDispatch</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">service</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">FlickrService</span>, <span class="ActionScriptDefault_Text">response</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>, <span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">FlickrResultEvent</span>, <span class="ActionScriptDefault_Text">propertyName</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;&quot;</span>, <span class="ActionScriptDefault_Text">parseFunction</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Function</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// Process the response to create an object for return values
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rsp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">processResponse</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">response</span>, <span class="ActionScriptDefault_Text">propertyName</span>, <span class="ActionScriptDefault_Text">parseFunction</span> <span class="ActionScriptBracket/Brace">)</span>;

            <span class="ActionScriptComment">// Copy some properties from the response to the result event
</span>            <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">success</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">rsp</span>.<span class="ActionScriptDefault_Text">success</span>;
            <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">rsp</span>.<span class="ActionScriptDefault_Text">data</span>;

            <span class="ActionScriptComment">// Notify everyone listening
</span>            <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">dispatchEvent</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">result</span> <span class="ActionScriptBracket/Brace">)</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Reusable method that the &quot;method group&quot; classes can call
         * to process the results of the Flickr method.
         *
         * @param flickrResponse The rest response string that aligns
         *        with the documentation here: 
         *            http://www.flickr.com/services/api/response.rest.html
         * @param parseFunction A reference to the function that should be used
         *        to parse the XML received from the server
         * @param propertyName The name of the property to put the parsed data in.
         *      For example, the result object will contain a &quot;data&quot; property that
         *         will contain an additional property (the value of propertyName) that
         *         contains the actual data.
         * @return An object with success and data properties.  Success
         *        will be true if the call was completed, false otherwise.
         *        Data will contain ether an array of NameValuePair (if
         *        successful) or errorCode and errorMessage properties.
         * @langversion ActionScript 3.0
         * @playerversion Flash 8.5
         * @tiptext
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">processResponse</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">flickrResponse</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>, <span class="ActionScriptDefault_Text">propertyName</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>, <span class="ActionScriptDefault_Text">parseFunction</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Function</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">result</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptComment">// Use an XMLDocument to convert a string to XML
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">doc</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XMLDocument</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">XMLDocument</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">doc</span>.<span class="ActionScriptDefault_Text">ignoreWhite</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptDefault_Text">doc</span>.<span class="ActionScriptDefault_Text">parseXML</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">flickrResponse</span> <span class="ActionScriptBracket/Brace">)</span>;
                        
            <span class="ActionScriptComment">// Get the root rsp node from the document
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">rsp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XMLNode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">doc</span>.<span class="ActionScriptDefault_Text">firstChild</span>;
            
            <span class="ActionScriptComment">// Clean up a little
</span>            <span class="ActionScriptDefault_Text">doc</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">null</span>; 
            
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rsp</span>.<span class="ActionScriptDefault_Text">attributes</span>.<span class="ActionScriptDefault_Text">stat</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;ok&quot;</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">success</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                
                <span class="ActionScriptComment">// Parse the XML object into a user-defined class (This gives us
</span>                <span class="ActionScriptComment">// nice code hinting, and abstracts away the FlickrAPI a bit - if
</span>                <span class="ActionScriptComment">// the FlickrAPI changes responses we can modify this service
</span>                <span class="ActionScriptComment">// without the user having to update their program code
</span>                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parseFunction</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptComment">// No parse function speficied, just pass through the XML data.
</span>                    <span class="ActionScriptComment">// Construct an object that we can access via E4X since
</span>                    <span class="ActionScriptComment">// the result we get back from Flickr is an xml response
</span>                    <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">XML</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rsp</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">data</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">propertyName</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseFunction</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">XML</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rsp</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">)</span>;    
                <span class="ActionScriptBracket/Brace">}</span>            
                                
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">success</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                
                
                <span class="ActionScriptComment">// In the event that we don&apos;t get an xml object
</span>                <span class="ActionScriptComment">// as part of the error returned, just
</span>                <span class="ActionScriptComment">// use the plain text as the error message
</span>                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">error</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">FlickrError</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">FlickrError</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rsp</span>.<span class="ActionScriptDefault_Text">firstChild</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> 
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">error</span>.<span class="ActionScriptDefault_Text">errorCode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">rsp</span>.<span class="ActionScriptDefault_Text">firstChild</span>.<span class="ActionScriptDefault_Text">attributes</span>.<span class="ActionScriptDefault_Text">code</span> <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">error</span>.<span class="ActionScriptDefault_Text">errorMessage</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">rsp</span>.<span class="ActionScriptDefault_Text">firstChild</span>.<span class="ActionScriptDefault_Text">attributes</span>.<span class="ActionScriptDefault_Text">msg</span>;
                    
                    <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">data</span>.<span class="ActionScriptDefault_Text">error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">error</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span> 
                <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">error</span>.<span class="ActionScriptDefault_Text">errorCode</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptOperator">-</span>1;
                    <span class="ActionScriptDefault_Text">error</span>.<span class="ActionScriptDefault_Text">errorMessage</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">rsp</span>.<span class="ActionScriptDefault_Text">nodeValue</span>;
                    
                    <span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">data</span>.<span class="ActionScriptDefault_Text">error</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">error</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
            <span class="ActionScriptBracket/Brace">}</span>
            
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">result</span>;            
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a date object into a Flickr date string
         *
         * @param date The date to convert
         * @return A string representing the date in a format
         *        that Flickr understands
         * @langversion ActionScript 3.0
         * @playerversion Flash 8.5
         * @tiptext
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">dateToString</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">date</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Date</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptComment">// Don&apos;t do anything if the date is invalid
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">date</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptString">&quot;&quot;</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">getFullYear</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;-&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">getMonth</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">+</span> 1<span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;-&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">getDate</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; &quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">getHours</span><span class="ActionScriptBracket/Brace">()</span>
                    <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;:&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">getMinutes</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;:&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">getSeconds</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a Flickr date string into a date object
         *
         * @param date The string to convert
         * @langversion ActionScript 3.0
         * @playerversion Flash 8.5
         * @tiptext
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">stringToDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">str</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;&quot;</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Date</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;&quot;</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">null</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">date</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Date</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Date</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptComment">// split the date into date / time parts
</span>            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">parts</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">str</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot; &quot;</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptComment">// See if we have the xxxx-xx-xx xx:xx:xx format
</span>            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parts</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">==</span> 2 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dateParts</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parts</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;-&quot;</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">timeParts</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parts</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptString">&quot;:&quot;</span> <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">setFullYear</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">dateParts</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">setMonth</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">dateParts</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">-</span> 1 <span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">// subtract 1 (Jan == 0)
</span>                <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">setDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">dateParts</span><span class="ActionScriptBracket/Brace">[</span>2<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">setHours</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">timeParts</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">setMinutes</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">timeParts</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">setSeconds</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">timeParts</span><span class="ActionScriptBracket/Brace">[</span>2<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">// Create a date based on # of seconds since Jan 1, 1970 GMT
</span>                <span class="ActionScriptDefault_Text">date</span>.<span class="ActionScriptDefault_Text">setTime</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">str</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">*</span> 1000 <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">date</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts an auth result XML object into an AuthResult instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseAuthResult</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AuthResult</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">authResult</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">AuthResult</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">AuthResult</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">authResult</span>.<span class="ActionScriptDefault_Text">token</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">auth</span>.<span class="ActionScriptDefault_Text">token</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">authResult</span>.<span class="ActionScriptDefault_Text">perms</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">auth</span>.<span class="ActionScriptDefault_Text">perms</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">authResult</span>.<span class="ActionScriptDefault_Text">user</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">User</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">authResult</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">auth</span>.<span class="ActionScriptDefault_Text">user</span>.@<span class="ActionScriptDefault_Text">nsid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">authResult</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">username</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">auth</span>.<span class="ActionScriptDefault_Text">user</span>.@<span class="ActionScriptDefault_Text">username</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">authResult</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">fullname</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">auth</span>.<span class="ActionScriptDefault_Text">user</span>.@<span class="ActionScriptDefault_Text">fullname</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">authResult</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a frob XML object into a string (the frob value)
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseFrob</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">frob</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a blog list XML object into an arry of Blog instances
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseBlogList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">blogs</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">b</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">blogs</span>.<span class="ActionScriptDefault_Text">blog</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">blog</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Blog</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Blog</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">blog</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">b</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">blog</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">b</span>.@<span class="ActionScriptDefault_Text">name</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">blog</span>.<span class="ActionScriptDefault_Text">needsPassword</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">b</span>.@<span class="ActionScriptDefault_Text">needspassword</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                <span class="ActionScriptDefault_Text">blog</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">b</span>.@<span class="ActionScriptDefault_Text">url</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;    
                
                <span class="ActionScriptDefault_Text">blogs</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">blog</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">blogs</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a contact list XML object into an array of User instances
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseContactList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">contacts</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">c</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">contacts</span>.<span class="ActionScriptDefault_Text">contact</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">contact</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">User</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">User</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">contact</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">c</span>.@<span class="ActionScriptDefault_Text">nsid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">contact</span>.<span class="ActionScriptDefault_Text">username</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">c</span>.@<span class="ActionScriptDefault_Text">username</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">contact</span>.<span class="ActionScriptDefault_Text">fullname</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">c</span>.@<span class="ActionScriptDefault_Text">realname</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">contact</span>.<span class="ActionScriptDefault_Text">isFriend</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">c</span>.@<span class="ActionScriptDefault_Text">friend</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                <span class="ActionScriptDefault_Text">contact</span>.<span class="ActionScriptDefault_Text">isFamily</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">c</span>.@<span class="ActionScriptDefault_Text">family</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                <span class="ActionScriptDefault_Text">contact</span>.<span class="ActionScriptDefault_Text">isIgnored</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">c</span>.@<span class="ActionScriptDefault_Text">ignored</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                
                <span class="ActionScriptDefault_Text">contacts</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">contact</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">contacts</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a pages photo list XML object into a PagesPhotoList instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePagedPhotoList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PagedPhotoList</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pagedPhotoList</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PagedPhotoList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PagedPhotoList</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">pagedPhotoList</span>.<span class="ActionScriptDefault_Text">page</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photos</span>.@<span class="ActionScriptDefault_Text">page</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">pagedPhotoList</span>.<span class="ActionScriptDefault_Text">pages</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photos</span>.@<span class="ActionScriptDefault_Text">pages</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">pagedPhotoList</span>.<span class="ActionScriptDefault_Text">perPage</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photos</span>.@<span class="ActionScriptDefault_Text">perpage</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">pagedPhotoList</span>.<span class="ActionScriptDefault_Text">total</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photos</span>.@<span class="ActionScriptDefault_Text">total</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photos</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">p</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">photo</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photo</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Photo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Photo</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">ownerId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">owner</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">secret</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">secret</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">latitude</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">latitude</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">longitude</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">longitude</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">farmId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">farm</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">originalSecret</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">originalsecret</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">title</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">title</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">isPublic</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">ispublic</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">isFriend</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">isfriend</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">isFamily</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">isfamily</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">license</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">license</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">license</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">dateUploaded</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stringToDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">dateupload</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">dateTaken</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stringToDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">datetaken</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">dateAdded</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stringToDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">dateadded</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">ownerName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">ownername</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">iconserver</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">iconServer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">iconserver</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">originalFormat</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">originalformat</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photo</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptDefault_Text">pagedPhotoList</span>.<span class="ActionScriptDefault_Text">photos</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">photos</span>;
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">pagedPhotoList</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a group category XML object into a Category instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseGroupCategory</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Category</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">category</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Category</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Category</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">category</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">category</span>.@<span class="ActionScriptDefault_Text">name</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">category</span>.<span class="ActionScriptDefault_Text">path</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">category</span>.@<span class="ActionScriptDefault_Text">path</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">category</span>.<span class="ActionScriptDefault_Text">pathIds</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">category</span>.@<span class="ActionScriptDefault_Text">pathids</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptComment">// Build sub categories
</span>            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subcat</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">category</span>.<span class="ActionScriptDefault_Text">subcat</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">subcategory</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Category</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Category</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">subcategory</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subcat</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">subcategory</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">subcat</span>.@<span class="ActionScriptDefault_Text">name</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">subcategory</span>.<span class="ActionScriptDefault_Text">count</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">subcat</span>.@<span class="ActionScriptDefault_Text">count</span> <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">category</span>.<span class="ActionScriptDefault_Text">subCategories</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">subcategory</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// Build groups
</span>            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">g</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">category</span>.<span class="ActionScriptDefault_Text">group</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">group</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Group</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Group</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">name</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">members</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">members</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">online</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">online</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">chatNsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">chatnsid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">inChat</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">inchat</span> <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">category</span>.<span class="ActionScriptDefault_Text">groups</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">group</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">category</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a group XML object into a Group instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseGroup</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Group</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">group</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Group</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Group</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">group</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;&quot;</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">group</span>.@<span class="ActionScriptDefault_Text">nsid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">name</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;&quot;</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">groupname</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">description</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">description</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">members</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">members</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">members</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">privacy</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">privacy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">privacy</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">group</span>.@<span class="ActionScriptDefault_Text">url</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">group</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a paged group list XML object into a PagedGroupList instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePagedGroupList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PagedGroupList</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">pagedGroupList</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PagedGroupList</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PagedGroupList</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">pagedGroupList</span>.<span class="ActionScriptDefault_Text">page</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">groups</span>.@<span class="ActionScriptDefault_Text">page</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">pagedGroupList</span>.<span class="ActionScriptDefault_Text">pages</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">groups</span>.@<span class="ActionScriptDefault_Text">pages</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">pagedGroupList</span>.<span class="ActionScriptDefault_Text">perPage</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">groups</span>.@<span class="ActionScriptDefault_Text">perpage</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">pagedGroupList</span>.<span class="ActionScriptDefault_Text">total</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">groups</span>.@<span class="ActionScriptDefault_Text">total</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">g</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">groups</span>.<span class="ActionScriptDefault_Text">group</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">group</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Group</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Group</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">nsid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">name</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">isEighteenPlus</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">eighteenplus</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                
                <span class="ActionScriptDefault_Text">pagedGroupList</span>.<span class="ActionScriptDefault_Text">groups</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">group</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">pagedGroupList</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a context XML object into an Array of Photo instances.
         * The first element is the previous photo, the second element is
         * the next photo.
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseContext</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">context</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photo</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Photo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Photo</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">prevphoto</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">secret</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">prevphoto</span>.@<span class="ActionScriptDefault_Text">secret</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">title</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">prevphoto</span>.@<span class="ActionScriptDefault_Text">title</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">prevphoto</span>.@<span class="ActionScriptDefault_Text">url</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">context</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photo</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptDefault_Text">photo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Photo</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">nextphoto</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">secret</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">nextphoto</span>.@<span class="ActionScriptDefault_Text">secret</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">title</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">nextphoto</span>.@<span class="ActionScriptDefault_Text">title</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">nextphoto</span>.@<span class="ActionScriptDefault_Text">url</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">context</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photo</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">context</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a group list XML object into an Array of Group instances.
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseGroupList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">groups</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">g</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">groups</span>.<span class="ActionScriptDefault_Text">group</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">group</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Group</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Group</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">nsid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">name</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">isAdmin</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">admin</span>.<span class="ActionScriptDefault_Text">toString</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">privacy</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">privacy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">privacy</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">photos</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">photos</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">iconserver</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">group</span>.<span class="ActionScriptDefault_Text">iconServer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">g</span>.@<span class="ActionScriptDefault_Text">iconserver</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptDefault_Text">groups</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">group</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">groups</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a user XML object into a User instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseUser</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">User</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">user</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">User</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">User</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptComment">// Either nsid or id will be defined, try nsid first
</span>            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">user</span>.@<span class="ActionScriptDefault_Text">nsid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">nsid</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">==</span> 0 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">user</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">username</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">username</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">isPro</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">user</span>.@<span class="ActionScriptDefault_Text">ispro</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">bandwidthMax</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">bandwidth</span>.@<span class="ActionScriptDefault_Text">max</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">bandwidthUsed</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">bandwidth</span>.@<span class="ActionScriptDefault_Text">used</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">filesizeMax</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">Number</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">filesize</span>.@<span class="ActionScriptDefault_Text">max</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">user</span>.@<span class="ActionScriptDefault_Text">url</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">user</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a person XML object into a User instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePerson</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">User</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">user</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">User</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">User</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.@<span class="ActionScriptDefault_Text">nsid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">isAdmin</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.@<span class="ActionScriptDefault_Text">isadmin</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">isPro</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.@<span class="ActionScriptDefault_Text">ispro</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">iconServer</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.@<span class="ActionScriptDefault_Text">iconserver</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">iconFarm</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.@<span class="ActionScriptDefault_Text">iconfarm</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">username</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.<span class="ActionScriptDefault_Text">username</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">fullname</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.<span class="ActionScriptDefault_Text">realname</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">mboxSha1Sum</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.<span class="ActionScriptDefault_Text">mbox_sha1sum</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">location</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.<span class="ActionScriptDefault_Text">location</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">photoUrl</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.<span class="ActionScriptDefault_Text">photosurl</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">profileUrl</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.<span class="ActionScriptDefault_Text">profileurl</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">firstPhotoUploadDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stringToDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">firstdate</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">firstPhotoTakenDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stringToDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">firstdatetaken</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">photoCount</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">person</span>.<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">count</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">user</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a photo context XML object into a PhotoContext instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePhotoContext</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoContext</span> <span class="ActionScriptBracket/Brace">{</span>
             <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoContext</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoContext</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoContext</span><span class="ActionScriptBracket/Brace">()</span>;
             
             <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">s</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptReserved">set</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                 <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoSet</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoSet</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoSet</span><span class="ActionScriptBracket/Brace">()</span>;
                 <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                 <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">title</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">title</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                 
                 <span class="ActionScriptDefault_Text">photoContext</span>.<span class="ActionScriptDefault_Text">sets</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoSet</span> <span class="ActionScriptBracket/Brace">)</span>;
             <span class="ActionScriptBracket/Brace">}</span>
             
             <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">p</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">pool</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                 <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoPool</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoPool</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoPool</span><span class="ActionScriptBracket/Brace">()</span>;
                 <span class="ActionScriptDefault_Text">photoPool</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                 <span class="ActionScriptDefault_Text">photoPool</span>.<span class="ActionScriptDefault_Text">title</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">title</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                 
                 <span class="ActionScriptDefault_Text">photoContext</span>.<span class="ActionScriptDefault_Text">pools</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoPool</span> <span class="ActionScriptBracket/Brace">)</span>;
             <span class="ActionScriptBracket/Brace">}</span>
             
             <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">photoContext</span>;    
         <span class="ActionScriptBracket/Brace">}</span>
         
         <span class="ActionScriptASDoc">/**
          * Converts a photo list XML object into an Array of Photo instances
          */</span>
         <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePhotoList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
             <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photos</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
             
             <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">p</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">photo</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photo</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Photo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Photo</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">farmId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">farm</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">ownerId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">owner</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">secret</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">secret</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">ownerName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">username</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">title</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">title</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                                
                <span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photo</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">photos</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a photo context XML object into a PhotoContext instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePhotoCountList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoCounts</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">p</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photocounts</span>.<span class="ActionScriptDefault_Text">photocount</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoCount</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoCount</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoCount</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoCount</span>.<span class="ActionScriptDefault_Text">count</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">count</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photoCount</span>.<span class="ActionScriptDefault_Text">fromDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stringToDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">fromdate</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>; 
                <span class="ActionScriptDefault_Text">photoCount</span>.<span class="ActionScriptDefault_Text">toDate</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stringToDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">todate</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">photoCounts</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoCount</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">photoCounts</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a photo exif list XML object into a Photo instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePhotoExifs</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Photo</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photo</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Photo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Photo</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">secret</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">secret</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">exif</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoExif</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoExif</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoExif</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoExif</span>.<span class="ActionScriptDefault_Text">tag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">e</span>.@<span class="ActionScriptDefault_Text">tag</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photoExif</span>.<span class="ActionScriptDefault_Text">tagspaceId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">e</span>.@<span class="ActionScriptDefault_Text">tagspaceid</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photoExif</span>.<span class="ActionScriptDefault_Text">tagspace</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">e</span>.@<span class="ActionScriptDefault_Text">tagspace</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoExif</span>.<span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">e</span>.@<span class="ActionScriptDefault_Text">label</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoExif</span>.<span class="ActionScriptDefault_Text">raw</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">raw</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoExif</span>.<span class="ActionScriptDefault_Text">clean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">clean</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">exifs</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoExif</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">photo</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a photo XML object into a Photo instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePhoto</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Photo</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photo</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Photo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Photo</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">farmId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">farm</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">secret</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">secret</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">server</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">isFavorite</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">isfavorite</span>.<span class="ActionScriptDefault_Text">toString</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">license</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">license</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">license</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">rotation</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">rotation</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">originalFormat</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.@<span class="ActionScriptDefault_Text">originalformat</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">ownerId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">owner</span>.@<span class="ActionScriptDefault_Text">nsid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">ownerName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">owner</span>.@<span class="ActionScriptDefault_Text">username</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">ownerRealName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">owner</span>.@<span class="ActionScriptDefault_Text">realname</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">ownerLocation</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">owner</span>.@<span class="ActionScriptDefault_Text">location</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">title</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">title</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">description</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">description</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">permissions</span>.@<span class="ActionScriptDefault_Text">permcomment</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">commentPermission</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">permissions</span>.@<span class="ActionScriptDefault_Text">permcomment</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">permissions</span>.@<span class="ActionScriptDefault_Text">permaddmeta</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">addMetaPermission</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">permissions</span>.@<span class="ActionScriptDefault_Text">permaddmeta</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">dateAdded</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stringToDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">dates</span>.@<span class="ActionScriptDefault_Text">posted</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">dateTaken</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">stringToDate</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">dates</span>.@<span class="ActionScriptDefault_Text">taken</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">editability</span>.@<span class="ActionScriptDefault_Text">cancomment</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">canComment</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">editability</span>.@<span class="ActionScriptDefault_Text">cancomment</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">editability</span>.@<span class="ActionScriptDefault_Text">canaddmeta</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">canAddMeta</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">editability</span>.@<span class="ActionScriptDefault_Text">canaddmeta</span> <span class="ActionScriptBracket/Brace">)</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">comments</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">commentCount</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">comments</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">n</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">notes</span>.<span class="ActionScriptDefault_Text">note</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoNote</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoNote</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoNote</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoNote</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">n</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoNote</span>.<span class="ActionScriptDefault_Text">authorId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">n</span>.@<span class="ActionScriptDefault_Text">author</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoNote</span>.<span class="ActionScriptDefault_Text">authorName</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">n</span>.@<span class="ActionScriptDefault_Text">authorname</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoNote</span>.<span class="ActionScriptDefault_Text">rectangle</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Rectangle</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoNote</span>.<span class="ActionScriptDefault_Text">rectangle</span>.<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">n</span>.@<span class="ActionScriptDefault_Text">x</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photoNote</span>.<span class="ActionScriptDefault_Text">rectangle</span>.<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">n</span>.@<span class="ActionScriptDefault_Text">y</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photoNote</span>.<span class="ActionScriptDefault_Text">rectangle</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">n</span>.@<span class="ActionScriptDefault_Text">w</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photoNote</span>.<span class="ActionScriptDefault_Text">rectangle</span>.<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">n</span>.@<span class="ActionScriptDefault_Text">h</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photoNote</span>.<span class="ActionScriptDefault_Text">note</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">n</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">notes</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoNote</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">t</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">tags</span>.<span class="ActionScriptDefault_Text">tag</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoTag</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoTag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoTag</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoTag</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoTag</span>.<span class="ActionScriptDefault_Text">authorId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.@<span class="ActionScriptDefault_Text">author</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoTag</span>.<span class="ActionScriptDefault_Text">raw</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.@<span class="ActionScriptDefault_Text">raw</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoTag</span>.<span class="ActionScriptDefault_Text">tag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">tags</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoTag</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">u</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">urls</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoUrl</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoUrl</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoUrl</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoUrl</span>.<span class="ActionScriptDefault_Text">type</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">u</span>.@<span class="ActionScriptDefault_Text">type</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoUrl</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">u</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">urls</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoUrl</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">photo</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a photo perm XML object into a Photo instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePhotoPerms</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Photo</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photo</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Photo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Photo</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">perms</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">isPublic</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">perms</span>.@<span class="ActionScriptDefault_Text">ispublic</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">isFriend</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">perms</span>.@<span class="ActionScriptDefault_Text">isfriend</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">isFamily</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">perms</span>.@<span class="ActionScriptDefault_Text">isfamily</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">canComment</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">perms</span>.@<span class="ActionScriptDefault_Text">permcomment</span> <span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">canAddMeta</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">perms</span>.@<span class="ActionScriptDefault_Text">permaddmeta</span> <span class="ActionScriptBracket/Brace">)</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">photo</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a size list XML object into an array of PhotoSize instances
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePhotoSizeList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoSizes</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">s</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">sizes</span>.<span class="ActionScriptDefault_Text">size</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoSize</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoSize</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoSize</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoSize</span>.<span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">label</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoSize</span>.<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">width</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photoSize</span>.<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">height</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photoSize</span>.<span class="ActionScriptDefault_Text">source</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">source</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoSize</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">url</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">photoSizes</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoSize</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">photoSizes</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a license list XML object into an array of License instances
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseLicenseList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">licenses</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">l</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">licenses</span>.<span class="ActionScriptDefault_Text">license</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">license</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">License</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">License</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">license</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">l</span>.@<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">license</span>.<span class="ActionScriptDefault_Text">name</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">l</span>.@<span class="ActionScriptDefault_Text">name</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">license</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">l</span>.@<span class="ActionScriptDefault_Text">url</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">licenses</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">license</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">licenses</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a note XML object into a Note instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePhotoNote</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoNote</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoNote</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoNote</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoNote</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">photoNote</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">note</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">photoNote</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts an uploader ticket list XML object into an Array of UploadTicket instances
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseUploadTicketList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">uploadTickets</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">t</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">uploader</span>.<span class="ActionScriptDefault_Text">ticket</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">uploadTicket</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">UploadTicket</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">UploadTicket</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">uploadTicket</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">uploadTicket</span>.<span class="ActionScriptDefault_Text">photoId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.@<span class="ActionScriptDefault_Text">photoid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">uploadTicket</span>.<span class="ActionScriptDefault_Text">isComplete</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.@<span class="ActionScriptDefault_Text">complete</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                <span class="ActionScriptDefault_Text">uploadTicket</span>.<span class="ActionScriptDefault_Text">uploadFailed</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.@<span class="ActionScriptDefault_Text">complete</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;2&quot;</span>;
                <span class="ActionScriptDefault_Text">uploadTicket</span>.<span class="ActionScriptDefault_Text">isInvalid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.@<span class="ActionScriptDefault_Text">invalid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;1&quot;</span>;
                
                <span class="ActionScriptDefault_Text">uploadTickets</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">uploadTicket</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">uploadTickets</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a photo set XML object into a PhotoSet instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePhotoSet</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoSet</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoSet</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoSet</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoSet</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.@<span class="ActionScriptDefault_Text">url</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">ownerId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.@<span class="ActionScriptDefault_Text">owner</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">primaryPhotoId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.@<span class="ActionScriptDefault_Text">primary</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.@<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">photoCount</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.@<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">title</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.<span class="ActionScriptDefault_Text">title</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">description</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.<span class="ActionScriptDefault_Text">description</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">secret</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.@<span class="ActionScriptDefault_Text">secret</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.@<span class="ActionScriptDefault_Text">server</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.@<span class="ActionScriptDefault_Text">server</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">p</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photoset</span>.<span class="ActionScriptDefault_Text">photo</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photo</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Photo</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Photo</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">secret</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">secret</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">title</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">title</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">photo</span>.<span class="ActionScriptDefault_Text">farmId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">p</span>.@<span class="ActionScriptDefault_Text">farm</span><span class="ActionScriptBracket/Brace">)</span>;
                
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photo</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">photoSet</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a photo set list XML object into a PhotoSet instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parsePhotoSetList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoSets</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">s</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">photosets</span>.<span class="ActionScriptDefault_Text">photoset</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoSet</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoSet</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoSet</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">url</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">ownerId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">ownerid</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">primaryPhotoId</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">primary</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">photoCount</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">photos</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;    
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">secret</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">secret</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">server</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">s</span>.@<span class="ActionScriptDefault_Text">server</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span>;    
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">title</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.<span class="ActionScriptDefault_Text">title</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoSet</span>.<span class="ActionScriptDefault_Text">description</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">s</span>.<span class="ActionScriptDefault_Text">description</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                
                <span class="ActionScriptDefault_Text">photoSets</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoSet</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">photoSets</span>;
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a tag list XML object into a User instance
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseUserTags</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">User</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">user</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">User</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">User</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">nsid</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">who</span>.@<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">t</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">who</span>.<span class="ActionScriptDefault_Text">tags</span>.<span class="ActionScriptDefault_Text">tag</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoTag</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoTag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoTag</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoTag</span>.<span class="ActionScriptDefault_Text">raw</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoTag</span>.<span class="ActionScriptDefault_Text">tag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">t</span>.@<span class="ActionScriptDefault_Text">count</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">photoTag</span>.<span class="ActionScriptDefault_Text">count</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">parseInt</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">t</span>.@<span class="ActionScriptDefault_Text">count</span>    <span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">user</span>.<span class="ActionScriptDefault_Text">tags</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoTag</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">user</span>;    
        <span class="ActionScriptBracket/Brace">}</span>
        
        <span class="ActionScriptASDoc">/**
         * Converts a tag list XML object into an Array of PhotoTag instances
         */</span>
        <span class="ActionScriptReserved">internal</span> <span class="ActionScriptReserved">static</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">parseTagList</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">xml</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptBracket/Brace">{</span>
            <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tags</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">for</span> <span class="ActionScriptReserved">each</span> <span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">t</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">XML</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">xml</span>.<span class="ActionScriptDefault_Text">tags</span>.<span class="ActionScriptDefault_Text">tag</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">photoTag</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">PhotoTag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">PhotoTag</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoTag</span>.<span class="ActionScriptDefault_Text">raw</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">photoTag</span>.<span class="ActionScriptDefault_Text">tag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">t</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">tags</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span> <span class="ActionScriptDefault_Text">photoTag</span> <span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">tags</span>;
        <span class="ActionScriptBracket/Brace">}</span>

    <span class="ActionScriptBracket/Brace">}</span>
    
<span class="ActionScriptBracket/Brace">}</span></pre></body>
</html>
